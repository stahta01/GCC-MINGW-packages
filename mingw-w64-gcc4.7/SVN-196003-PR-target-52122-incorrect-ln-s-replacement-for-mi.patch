From 6e25f8b2104678ae27fc6e6e336d71de6704515c Mon Sep 17 00:00:00 2001
From: Kai Tietz <ktietz@redhat.com>
Date: Wed, 13 Feb 2013 11:20:30 +0100
Subject: SVN 196003 PR target/52122 add LN_S_RECURSIVE

Patch file edited by Tim S.

PR target/52122
* Makefile.in (LN_S_RECUSIVE): New.
(adainclude, adalib): Use LN_S_RECURSIVE for copy.

---
 libada/Makefile.in | 14 ++++++++++----

diff --git a/libada/Makefile.in b/libada/Makefile.in
index 389a2fb2f79..68c846fe94e 100644
--- a/libada/Makefile.in
+++ b/libada/Makefile.in
@@ -43,6 +43,12 @@ enable_shared = @enable_shared@
 LN_S=@LN_S@
 AWK=@AWK@
 
+ifeq (cp -p,$(LN_S))
+LN_S_RECURSIVE = cp -pR
+else
+LN_S_RECURSIVE = $(LN_S)
+endif
+
 # Variables for the user (or the top level) to override.
 objext=.o
 THREAD_KIND=native
@@ -100,8 +106,8 @@ gnatlib-plain: osconstool $(GCC_DIR)/ada/Makefile
 	&& touch stamp-libada
 	-rm -rf adainclude
 	-rm -rf adalib
-	$(LN_S) $(ADA_RTS_DIR) adainclude
-	$(LN_S) $(ADA_RTS_DIR) adalib
+	$(LN_S_RECURSIVE) $(ADA_RTS_DIR) adainclude
+	$(LN_S_RECURSIVE) $(ADA_RTS_DIR) adalib
 
 gnatlib-sjlj gnatlib-zcx gnatlib-shared: osconstool $(GCC_DIR)/ada/Makefile
 	test -f stamp-libada || \
@@ -109,8 +115,8 @@ gnatlib-sjlj gnatlib-zcx gnatlib-shared: osconstool $(GCC_DIR)/ada/Makefile
 	&& touch stamp-libada
 	-rm -rf adainclude
 	-rm -rf adalib
-	$(LN_S) $(ADA_RTS_DIR) adainclude
-	$(LN_S) $(ADA_RTS_DIR) adalib
+	$(LN_S_RECURSIVE) $(ADA_RTS_DIR) adainclude
+	$(LN_S_RECURSIVE) $(ADA_RTS_DIR) adalib
 
 osconstool:
 	$(MAKE) -C $(GCC_DIR)/ada $(LIBADA_FLAGS_TO_PASS) ./bldtools/oscons/xoscons
-- 
